<!DOCTYPE html>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
  <script src="http://apps.bdimg.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>产品详情</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="./static/css/base.css">
    <link rel="stylesheet" href="./static/css/index.css">
    <script src="./static/js/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
    </script>
</head>

<body>
    <div class="header">
        <div class="title">
            成卓玩具厂
        </div>
        <div class="contact">
            <p>联系人： <span>张老板</span></p>
            <p>联系电话： <span>15986830618</span></p>
        </div>
    </div>
    <div class="main">
        <div class="mainBox">
            <div class="slideshow">
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p>玩具名称玩具名称玩具名称玩具</p>
                        <p>￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p>玩具名称玩具名称玩具名称玩具</p>
                        <p>￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p>玩具名称玩具名称玩具名称玩具</p>
                        <p>￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p class="itemMainName">玩具名称玩具名称玩具名称玩具</p>
                        <p class="itemMainPrice">￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p>玩具名称玩具名称玩具名称玩具</p>
                        <p>￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p class="itemMainName">玩具名称玩具名称玩具名称玩具</p>
                        <p class="itemMainPrice">￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p>玩具名称玩具名称玩具名称玩具</p>
                        <p>￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p class="itemMainName">玩具名称玩具名称玩具名称玩具</p>
                        <p class="itemMainPrice">￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p>玩具名称玩具名称玩具名称玩具</p>
                        <p>￥<span>98.00</span></p>
                    </div>
                </div>
                <div class="item">
                    <div class="itemMain">
                        <img src="./static/images/logo.png" alt="">
                        <p class="itemMainName">玩具名称玩具名称玩具名称玩具</p>
                        <p class="itemMainPrice">￥<span>98.00</span></p>
                    </div>
                </div>
            </div>
            <div class="search">
                <div class="sork">
                    <div>
                        <p>时间</p> <span id="isTime" class="arrowsFlag"></span>
                    </div>
                    <div>
                        <p>价格</p> <span id="isPrice" class="arrowsFlag"></span>
                    </div>
                </div>
                <div class="searchInput">
                    <div class="searchInput_l">
                        <img src="./static/images/fdj.png" alt="">
                        <input id="keyWord" type="text" placeholder="请输入关键字">
                    </div>
                    <div class="searchInput_r">搜索</div>
                </div>
                <div class="triggerIcon">
                    <div id="cutGridIcon" class="gridActiveIcon"></div>
                    <div id="cutColumnIcon" class="columnIcon"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="tableBox">
        <ul id="gridList" style="display:block;">
        </ul>
        <!-- 一行两个 -->
        <ul id="columnList" style="display:none;">
        </ul>
        <!-- 分页 -->
        <div class="pageBox">
            <ul>
                <li> <select id="changePage" onChange="handelChangePage()">
                        <option value="12">12</option>
                        <option value="24">24</option>
                        <option value="36">36</option>
                    </select></li>
                <li style="border: 0;"> 共</li>
                <li style="border: 0;">
                    <input id="totalCountPage" type="text" value="0">
                </li>
                <li style="border: 0;"> 条</li>
                <li onclick="previousPage()">
                    上一页
                </li>
                <li style="margin: 5px 10px;">
                    <input id="numberPage" type="text" value="1">
                </li>
                <li onclick="nextPage()">
                    下一页
                </li>
            </ul>
        </div>
    </div>
    <div class="footer">
        <div>
            <p>资料来源： <span>耀昇展厅</span></p>
            <p> 技术支持：<span>深圳宏升软件技术开发有限公司</span></p>
        </div>

    </div>
</body>

<script>
    var url = "https://hall.toysbear.com"
    // 初始化
    var data = {
        pageIndex: 1,
        pageSize: 12,
        keyWord: ""
    }
    var tableDate = [];
    $(document).ready(function () {
        getProductkeyGuid()
        getProductList()
        // slideList()
    })

    function slideList() {
        // //定义一个变量存储边距
        // var num = 0;
        // //让边距不停减小，左移
        // var timeer

        // function autoPlay() {
        //     timeer = setInterval(function () {
        //         num -= 1;
        //         //当移动四张图片后，边距为-2000，这时候让Ul跳转回初始位置
        //         if (num <= -2800) {
        //             num = 0
        //         };
        //         $('.slideshow').css('marginLeft', num);
        //     }, 10)
        // }
        // //运行定义的移动方法
        // autoPlay();

        // //鼠标移入清除移动，离开时继续运行
        // $('.item').hover(function () {
        //     //停止滚动
        //     clearInterval(timeer);
        //     //给相邻的元素添加淡入效果0.5的透明度
        //     $(this).siblings().fadeTo(0, 0.5);
        // }, function () {
        //     //继续滚动
        //     autoPlay(),
        //         //鼠标移出相邻图片的透明度改成1
        //         $(this).siblings().fadeTo(0, 1);
        // })

        var box = $('.slideshow');
        var ul = box.getElementsByTagName("ul")[0];//获取ul
        var lis = ul.getElementsByTagName("li");//获取所有的li元素
        var speed = 2;//速度
        ul.innerHTML += ul.innerHTML;//相当于克隆
        ul.style.width = lis.length*lis[0].offsetWidth+'px';//计算赋值ul的宽度
        //滚动方法
   function move (){
       // 如果当前left值 <= 负ul/2的宽度 给left值重新定位成0
       if(ul.offsetLeft<=-ul.offsetWidth/2){
            ul.style.left = "0";
         }
       //像左边滚动
        ul.style.left = ul.offsetLeft - speed + 'px';
    }
    //定时器
     var timer = setInterval(move,30);
     //鼠标经过控制暂停滚动
     box.onmouseover = function () {
     	 clearInterval(timer);
     }
    box.onmouseout = function () {
     timer = setInterval(move,30);
   }

    }
    // 请求厂商信息
    function getProductkeyGuid() {
        $.get(url + "/api/Manufacturer/ManufacturerInfo", {
                keyGuid: "BE9757F5-E2B7-43DC-BABC-09251BCE3C72"
            },
            function (data) {
                console.log(data);
            });

    }
    // 请求列表
    function getProductList() {
        console.log(data);
        $.get(url + "/api/Product/ProductList", data, function (data) {

            console.log(data.Data.ProductInfo.Items);
            if (document.getElementById('gridList').style.display === "block") {
                getGridList(data.Data.ProductInfo.Items)
                tableDate = data.Data.ProductInfo.Items
                // tableDate.slice(0,10)
            } else {
                getColumnList(data.Data.ProductInfo.Items)
                tableDate = data.Data.ProductInfo.Items
            }
            $("#totalCountPage").val(data.Data.ProductInfo.TotalCount)
            $("#keyWord").val("");
            data.keyWord = "";
            delete data.keyWord
        });

    }
    // 渲染列表
    function getGridList(list) {
        // var gridList = document.getElementById('gridList');
        $("#gridList").empty();
        for (var i = 0; i < list.length; i++) {
            var html = ""
            switch (list[i].ProductImages) {
                case "":
                case null:
                case undefined:
                case "null":
                case "undefined":
                    list[i].imgUrlVal = ""
                    break;
                default:
                    list[i].imgUrlVal = list[i].ProductImages[0]
            }
            html += " <li><div class='itemMain'> <img alt='' src=" + list[i].imgUrlVal + "><p>" + list[i]
                .ProductName +
                "</p><p>￥<span>" +
                list[i].FactoryPrice + "</span></p></div></li>"
            $("#gridList").append(html);
        }
    }
    // 渲染列表gridTable
    function getColumnList(list) {
        // var columnList = document.getElementById('columnList');
        $("#columnList").empty();
        for (var i = 0; i < list.length; i++) {
            var html = ""
            switch (list[i].FactoryPrice) {
                case "":
                case null:
                case undefined:
                case "null":
                case "undefined":
                    list[i].FactoryPrice = "  "
                    break;
                default:
                    list[i].FactoryPriceVal = list[i].FactoryPrice
            }
            switch (list[i].ProductImages) {
                case "":
                case null:
                case undefined:
                case "null":
                case "undefined":
                    list[i].imgUrlVal = ""
                    break;
                default:
                    list[i].imgUrlVal = list[i].ProductImages[0]
            }
            html += " <li> <div class='listLeft'><img  alt='' src=" + list[i].imgUrlVal + "><p>￥<span>" + list[i]
                .FactoryPriceVal +
                "</span></p></div><div class='listRight'><h3>" +
                list[i].ProductName + "</h3><p>出厂货号：<span>" + list[i].FactoryNo + "</span></p><p> 包装：<span>" + list[i]
                .ChinesePack +
                "</span></p><p>产品规格：<span>" + list[i].ProductLength + "/" + list[i].ProductWidth + "/" + list[i]
                .ProductHeight + "(CM)</span></p><p>外箱规格：<span>" +
                list[i].OuterBoxLength + "/" + list[i].OuterBoxWidth + "/" + list[i].OuterBoxHeight +
                "(CM)</span></p> <p> 包装规格： <span> " + list[i].InnerBoxLength + "/" + list[i].InnerBoxWidth + "/" + list[
                    i].InnerBoxHeight +
                "(CM)</span></p><p> 装箱量：<span>" + list[i].OuterBoxLoadCapa + "(" + list[i].BoxUnit +
                ")</span></p><p> 体积 / 材积：<span> " + list[i].OuterBoxBulkStere + "(CBM)/" + list[i].OuterBoxBulkFeet +
                "(CUFT)</span></p><p>毛重 / 净重：<span>" + list[i].OuterBoxGrossWeight + "/" + list[i].OuterBoxNetWeight +
                " (kg)</span></p></div></li>"
            $("#columnList").append(html);
        }
    }

    //切换产品样式
    $("#cutGridIcon").click(function () {
        document.getElementById('gridList').style.display = 'block';
        document.getElementById('columnList').style.display = 'none';

        $('#cutGridIcon').removeClass().addClass("gridActiveIcon")
        $('#cutColumnIcon').removeClass().addClass("columnIcon")
        getProductList()
    });

    $("#cutColumnIcon").click(function () {
        document.getElementById('gridList').style.display = 'none';
        document.getElementById('columnList').style.display = 'block';
        $('#cutGridIcon').removeClass().addClass("gridIcon")
        $('#cutColumnIcon').removeClass().addClass("columnActiveIcon")
        getProductList()
    });
    //   搜索
    $(".searchInput_r").click(function () {
        if ($("#keyWord").val()) data.keyWord = $("#keyWord").val();
        data.pageIndex = 1;
        data.pageSize = 12;
        $("#numberPage").val(1);
        $("#changePage").val(12);
        getProductList()
    })
    //分页条数请求
    function handelChangePage() {
        data.pageSize = $("#changePage").val()
        getProductList()
    }
    // 上一页
    function previousPage() {
        var numberPage = $("#numberPage").val()
        numberPage--
        if (numberPage < 1) {
            alert("已经是第一页了");
            $("#numberPage").val(1);
        } else {
            $("#numberPage").val(numberPage)
            data.pageIndex = numberPage;
            getProductList()
        }
    }
    // 下一页
    function nextPage() {
        var numberPage = $("#numberPage").val()
        if (tableDate.length < data.pageSize) {
            return false
        } else {
            numberPage++
            $("#numberPage").val(numberPage)
            var totalCount = $("#totalCountPage").val()
            if (numberPage * data.pageSize > totalCount) {
                if (numberPage >= Math.ceil(totalCount / data.pageSize) + 1) {
                    numberPage--;
                    $("#numberPage").val(numberPage)
                    return false
                }
            }
            data.pageIndex = numberPage;
            getProductList()
        }
    }
    // 时间排序
    $("#isTime").click(function () {
        if ($('#isTime').attr('class') === "arrowsTrue") {
            $('#isTime').removeClass().addClass("arrowsFlag")
            data.isTime = false;
            getProductList()
        } else {
            data.isTime = true;
            $('#isTime').removeClass().addClass("arrowsTrue")
            getProductList()
        }
    })
    // 价格排序
    $("#isPrice").click(function () {
        if ($('#isPrice').attr('class') === "arrowsTrue") {
            data.isPrice = false;
            $('#isPrice').removeClass().addClass("arrowsFlag")
            getProductList()
        } else {
            data.isPrice = true;
            $('#isPrice').removeClass().addClass("arrowsTrue")
            getProductList()
        }


    })
</script>

</html>