<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=7">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>小竹熊云科技</title>
  <script src="../../static/js/jquery-1.8.3.min.js"></script>
  <script src="../../static/js/template.js"></script>


  <link rel="stylesheet" href="../../static/css/base.css">
  <link href="./erpOrderDetails.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <div class="erpOrderDetails">
    <!-- 头部 -->
    <div class="toplauotBox">
      <div class="toplauot">
        <div class="left">
          <img src="../../static/images/logo.png" alt="">
          <div class="titleBox">
            <div class="chTitle">
              小竹熊订单同步管理
            </div>
            <br>
            <div class="enTitle">
              Shenzhen Little Bamboo Bear Technology co.,Ltd.
            </div>
          </div>
        </div>
        <div class="right">
          <div class="shouyeBox ">
            <div class=" userImg">
              <img class="homeIcon" src="../../static/images/erpHomeIcon.png" alt="">
            </div>
            <span class="homeText" onclick="toHome()">首页</span>
          </div>
          <div class="shouyeBox " @click="resetSample">
            <div class=" userImg">
              <img class="homeIcon" src="../../static/images/activeSampleIcon.png" alt="">
            </div>
            <span class="sampleText">
              我的订单
            </span>
          </div>
          <!-- <div class="loginBtn" @click="toLogins">登录系统</div> -->
          <div class="shouyeBox ">
            <div class="userImg">
              <img class="homeLogo" src="../../static/images/logo.png" alt="">
            </div>
            <span class="signOut" @click="signOut">退出</span>
          </div>
        </div>
      </div>
    </div>
    <div id="myTable">
      <div class="toploautMain">
        <div class="left">
          <img class="homeLogo" src="../../static/images/logo.png" alt="">
        </div>
        <div class="right">
          <div class="addrs" id="fromCompanyNameData">
            <script id="fromCompanyName" type="text/html">
       <%=fromCompanyName%>
          </script>
          </div>
          <div class="sampleDetail">
            <div class="item">
              <div class="title">本次代号：
                <script id="fromCompanyName" type="text/html">
                  <%=the_nu%>
                     </script>

              </div>

            </div>
            <div class="item">
              <div class="title">择样数量：
                <script id="fromCompanyName" type="text/html">
                  <%=number%>
                     </script>
              </div>

            </div>
            <div class="item">
              <div class="title">择样编号：
                <script id="fromCompanyName" type="text/html">
                  <%=number%>
                     </script>
              </div>

            </div>
            <div class="item">
              <div class="title">择样时间：</div>
              <script id="fromCompanyName" type="text/html">
                <%=happenDate%>
                   </script>
            </div>
            <div class="item">
              <div class="title">厂商数量：
                <script id="fromCompanyName" type="text/html">
                  <%=supplierCount%>
                     </script>
              </div>

            </div>
            <div class="item">
              <div class="title">是否导入：</div>
              <input class="checkbox" type="checkbox" name="vehicle" value="Bike"> 是
            </div>
            <div class="item fanhui" style="cursor: pointer;" onclick="fanhui()">
              <i class="iconfont icon-fanhui" style="margin-right: 5px;"></i>
              返回
            </div>
          </div>
        </div>
      </div>
      <!-- table表格区 -->
      <div class="tableBox">
        <div class="flowTable">
          <table id="example" class="display" style="width:100%">
            <thead>
              <tr>
                <th rowspan="2" class="text-center">图片</th>
                <th rowspan="2" class="text-center">产品名称</th>
                <th rowspan="2" class="text-center">公司编号</th>
                <th rowspan="2" class="text-center">货号</th>
                <th rowspan="2" class="text-center">包装</th>
                <th rowspan="2" class="text-center">内盒/装箱数</th>
                <th rowspan="2" class="text-center">出厂价</th>
                <th rowspan="2" class="text-center thDete ">
                  <div class="thTxt"> 价钱</div>
                  <div class="triangle">
                    <p onclick="topDete()" class="topS"></p>
                    <p onclick="bottomDete()" class="btoS"></p>
                  </div>
                </th>
                <th colspan="3" class="text-center thWidth">产品规格
                </th>
                <th colspan="3" class="text-center thWidth">包装规格</th>
                <th colspan="3" class="text-center thWidth">外箱规格</th>
                <th rowspan="2" class="text-center">体积</th>
                <th rowspan="2" class="text-center">材积</th>
                <th rowspan="2" class="text-center">毛重</th>
                <th rowspan="2" class="text-center">净重</th>
                <th rowspan="2" class="text-center">备注</th>
                <th rowspan="2" class="text-center">厂家名称</th>
                <th rowspan="2" class="text-center">厂商联系方式</th>
                <th rowspan="2" class="text-center">厂家编号</th>
              </tr>
              <tr>
                <th class="text-center">长</th>
                <th class="text-center">宽 </th>
                <th class="text-center">高 </th>
                <th class="text-center">长</th>
                <th class="text-center">宽 </th>
                <th class="text-center">高 </th>
                <th class="text-center">长</th>
                <th class="text-center">宽 </th>
                <th class="text-center">高 </th>
              </tr>
            </thead>
            <tbody id="tbodyData">

            </tbody>
          </table>
        </div>
        <!-- 二维码下载 -->
        <div class="qr">
          <div class="qrImg">
            <img src="../../static/images/ErWeiMa.png" alt="">
          </div>
          <p>扫码下载</p>
          <p>小竹熊APP</p>
        </div>
      </div>
      <!-- 分页 -->
      <div class="page">
        <ul class="pagination"></ul>
        <input type="hidden" id="currentPage" name="currentPage" value="1"></input>
        <input type="hidden" id="totalPage" value="54"></input>
      </div>
    </div>
  </div>
</body>

</html>
<script>
  var url = "http://139.9.71.135:8096"
  var userToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJMaXR0bGVCZWFyIiwianRpIjoiNjUwY2NhNTMtYzk5YS00M2M5LWJiMWEtNTcyZGQzNDY5YTRjIiwiaWF0IjoxNjE4MjIwODU3LCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiMTc2MDMwMzM0NTgiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zeXN0ZW0iOiJQQyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL3NpZCI6ImU2Yzg5ODllLTUyMGEtNGEyOS05Y2Y1LTAwZDAyNmVmZDBhMiIsIm5iZiI6MTYxODIyMDg1NywiZXhwIjoxNjE4MzA3MjU3LCJpc3MiOiJMaXR0bGVCZWFyIiwiYXVkIjoiTGl0dGxlQmVhciJ9.PpBz-nmKoqz5ZVlRY9x2H8nA1Nm7iQy8h26CB9NfSGs"
  //初始化
  var that = this
  $(document).ready(function () {
    // 用户信息

    // sessionStorage.setItem("user", JSON.stringify(fd));
    // //订单标号
    if (sessionStorage.getItem("orderCount")) {
      var orderCount = sessionStorage.getItem("orderCount");
      console.log(orderCount);
      that.getSampleOrderDetailPageThree({
        skipCount: 1,
        maxResultCount: 12,
        orderCount: orderCount
      })
    }
  })

  // 请求列表数据
  function getSampleOrderDetailPageThree(data) {
    $.ajax({
      type: "POST",
      url: url + "/api/SampleOrderDetailPageThree",
      data: JSON.stringify(data),
      headers: {
        "Utoken": userToken//此处放置请求到的用户token
      },
      contentType: "application/json",
      success: function (data) {
        if (res.data.result.code === 200) {
          this.getTable(res.data.result.item.items)
        }
        console.log(data, "成功的回调");

      }
    });
  }
  var data = [
    {
      imgUrl: "图片",
      pr_na: "产品名称",
      client_nu: "公司编号",
      fa_no: "货号",
      ch_pa: "包装",
      ou_lo: "内盒/装箱数",
      fa_pr: "出厂价",
      ha_in_qu: "价格",
      pr_le: "产品规格",//长
      ou_wi: "包装规格",//宽
      ou_hi: "外箱规格",//高
      bulk_stere: "体积",
      bulk_feet: "材积",
      gr_we: "毛重",
      ne_we: "净重",
      remark: "备注",
      ma_na: "厂家名称",
      handset: "厂商联系方式",
      ma_nu: "厂家编号"
    },
  ]
  // 渲染列表
  function getTable(data) {
    var tbodyData = document.getElementById('tbodyData');
    for (var i = 0; i < data.length; i++) {
      var html = ""
      html += " <tr>" + "<td>" + data[i].imgUrl + "</td>" +
        " <td > " + data[i].pr_na + "</td > " +
        "<td>" + data[i].client_nu + "</td>" + "<td>" + data[i].fa_no + "</td>" +
        "<td>" + data[i].ch_pa + "</td>" + "<td>" + data[i].ou_lo + "</td>" +
        "<td>" + data[i].fa_pr + "</td>" + "<td>" + data[i].ha_in_qu + "</td>" +
        "<td>" + data[i].pr_le + "</td>" + "<td>" + data[i].ou_wi + "</td>" +
        "<td>" + data[i].ou_hi + "</td>" +
        "<td>" + data[i].bulk_stere + "</td>" + "<td>" + data[i].bulk_feet + "</td>" +
        "<td>" + data[i].gr_we + "</td>" + "<td>" + data[i].ne_we + "</td>" +
        "<td>" + data[i].remark + "</td>" + "<td>" + data[i].ma_na + "</td>" +
        "<td>" + data[i].handset + "</td>" + "<td>" + data[i].ma_nu + "</td>" +
        "</tr>"
      $("#tbodyData").append(html);

    }
  }

  // 返回
  function fanhui() {
    window.location.href = "../erpOrder/erpOrder.html"
  }
  function toHome() {
    console.log("我是首页");
  }

</script>
<script type="text/javascript">
  $().ready(function () {
    var curPage = $("#currentPage").val();
    var last = $("#totalPage").val();
    var page = Math.ceil(curPage / 10);
    //调用绘制分页样式函数
    draw(page, curPage);

    //绑定点击页码事件
    $(document).on("click", ".pagination li a", function () {
      var str = $(this).html();
      if (!isNaN(str)) {
        //移除之前的active
        $(".pagination li a").removeClass("active");
        $(this).attr("class", "active");
        $("#currentPage").val(str);
      }
    });
    //绑定下一页点击事件
    $(document).on("click", "#nextPage", function () {
      var num = $(".active").html();
      var curPage = $("#currentPage").val();
      var last = $("#totalPage").val();
      var page = Math.ceil((parseInt(num)) / 10);
      if (num < page * 10 && num != last) {
        //移除之前的active
        $(".pagination li a").removeClass("active");
        $("#" + (parseInt(num) + 1) + "").attr("class", "active");
        //$(".pagination li a[text="+(parseInt(num)+1)+"]").attr("class","active");//jQ1.6支持
        $("#currentPage").val(parseInt(num) + 1);
      } else if (num == page * 10 && num != last) {
        //清空之前的数据
        $(".pagination").html("");
        draw(page + 1, (parseInt(num) + 1));
      }
    })

    //绑定上一页点击事件
    $(document).on("click", "#previousPage", function () {
      var num = $(".active").html();
      var curPage = $("#currentPage").val();
      var last = $("#totalPage").val();
      var page = Math.ceil((parseInt(num)) / 10);
      if (num <= page * 10 && num != (page - 1) * 10 + 1) {
        //移除之前的active
        $(".pagination li a").removeClass("active");
        $("#" + (parseInt(num) - 1) + "").attr("class", "active");
        //$(".pagination li a[text="+(parseInt(num)+1)+"]").attr("class","active");//jQ1.6支持
        $("#currentPage").val(parseInt(num) - 1);
      } else if (num == (page - 1) * 10 + 1 && num != 1) {
        //清空之前的数据
        $(".pagination").html("");
        draw(page - 1, (parseInt(num) - 1));
      }
    })

    //绘制页面分页样式
    function draw(page, curPage) {
      //页面中的当前页
      var page = page;
      //后台传过来的页数
      var curPage = curPage;
      //后台传过来的总页数
      var datas = $("#totalPage").val();
      //每页显示多少条数据
      var pageSize = 10;
      //在网页中一共要分多少页
      var totalPage = Math.floor((datas - 1) / pageSize + 1);
      var liStr = "<li><a id='previousPage' href='#'>«</a></li>";
      $("#currentPage").val(curPage);
      if (page <= totalPage) {
        if (datas <= 10) {
          for (i = 1; i <= datas; i++) {
            //为当前页增加样式
            var active = "";
            if (i == curPage) {
              active = " class='active' ";
            }
            liStr += " <li><a id=" + i + " " + active + " href='#'>" + i + "</a></li>"
          }
        } else {
          var start = pageSize * (page - 1) + 1;
          var end = page * pageSize;
          if (page == totalPage) {
            for (i = start; i <= datas; i++) {
              //为当前页增加样式
              var active = "";
              if (i == curPage) {
                active = " class='active' ";
              }
              liStr += " <li><a id=" + i + " " + active + " href='#'>" + i + "</a></li>"
            }
          } else {
            for (i = start; i <= end; i++) {
              //为当前页增加样式
              var active = "";
              if (i == curPage) {
                active = " class='active' ";
              }
              liStr += " <li><a id=" + i + " " + active + " href='#'>" + i + "</a></li>"
            }
          }
        }
      }
      liStr += "<li><a id='nextPage' href='#'>»</a></li>";
      $(".pagination").append(liStr);
    }
  })
</script>